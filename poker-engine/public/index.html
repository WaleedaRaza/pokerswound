<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PokerGeek.ai â€” Elite Poker Lounge</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/style.css">

<!-- All styles moved to global style.css -->

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Centralized Auth Module -->
  <script src="/js/auth/supabase-auth.js"></script>
</head>
<body>
  <div class="bg-animation"></div>
  <div class="floating-cards" id="floating-cards"></div>

  <!-- CONSOLIDATED NAVBAR -->
  <nav class="navbar">
    <a href="/" class="navbar-brand">PokerGeek.ai</a>
        <ul class="navbar-links">
            <li><a href="/">Home</a></li>
            <li><a href="/play">Play Now</a></li>
        <li><a href="/friends">Friends</a></li>
            <li><a href="/ai-solver">AI Solver</a></li>
            <li><a href="/analysis">Analysis</a></li>
            <li><a href="/learning">Learning</a></li>
            <li><a href="/poker-today">Poker Today</a></li>
      </ul>
        <div class="navbar-auth" id="navbarAuth">
            <a href="#" class="navbar-btn navbar-btn-login" onclick="openLoginModal()">Log In</a>
            <a href="#" class="navbar-btn navbar-btn-signup" onclick="openLoginModal()">Sign Up</a>
        </div>
        
        <!-- User Profile Tile (shown when logged in) -->
        <div class="navbar-user" id="navbarUser" style="display: none;">
            <div class="user-profile-tile liquid-glass-tile" onclick="openSettingsModal()">
                <div class="user-avatar" id="userAvatar">ğŸ‘¤</div>
                <div class="user-info">
                    <div class="user-name" id="userName">Username</div>
                    <div class="user-status">Online</div>
                </div>
                <div class="user-menu-icon">âš™ï¸</div>
      </div>
    </div>
  </nav>

  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-title">PokerGeek<span class="suit-symbol">â™ </span>ai</h1>
      <p class="hero-subtitle"><b>
        The all in one Poker platform 
        <br>Provably fair shuffling
        <br>Data driven, AI powered
        <br></b>
      </p>
      <p class="hero-description">
        Experience the future of online poker with our cutting-edge platform featuring 
        provably fair shuffling, AI-powered analysis, and transparent gameplay.
      </p>
      <div class="cta-buttons">
        <a href="/play" class="btn btn-primary">Play Now</a>
        <a href="#" class="btn btn-secondary" onclick="openLoginModal(); return false;">Log In / Sign Up</a>
        <a href="/friends" class="btn btn-secondary">Add Friends</a>
      </div>
    </div>
  </section>

  <section class="features">
    <h2 class="features-title">Why Choose PokerGeek.ai?</h2>
    <div class="liquid-tiles-container">
      <div class="liquid-glass-tile">
        <div class="tile-icon">ğŸ”</div>
        <h3 class="tile-title">Provably Fair Shuffling</h3>
        <p class="tile-description">Entropy from real-world sources + crypto randomness. Verify any shuffle independently.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">âš¡</div>
        <h3 class="tile-title">Real-Time Multiplayer</h3>
        <p class="tile-description">Sub-100ms WebSockets for private rooms, public games, and tournaments.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">ğŸ¤–</div>
        <h3 class="tile-title">GTO + LLM</h3>
        <p class="tile-description">GTO solver fused with LLM coaching for strategy and study.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">ğŸ“Š</div>
        <h3 class="tile-title">Audit Trail</h3>
        <p class="tile-description">Every action + shuffle logged and auditable.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">ğŸ“ˆ</div>
        <h3 class="tile-title">Performance</h3>
        <p class="tile-description">Deep stats after 1000+ hands: VPIP, PFR, AF, position, etc.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">ğŸ›¡ï¸</div>
        <h3 class="tile-title">Anti-Cheat</h3>
        <p class="tile-description">Timing & behavior analysis, multi-account prevention, collusion monitoring.</p>
      </div>
    </div>
  </section>

  <section class="why-pokergeek">
    <div class="why-content">
      <h2 class="why-title">Why PokerGeek?</h2>
      <div class="why-story">
          <p class="why-intro">
            PokerGeek aims to leverage AI, data, and a deep focus on real poker players to deliver a holistic, all-in-one platform built around the full poker world. The platform supports private and public gameplay, comprehensive performance analytics, GTO and AI-driven coaching, social features, and more.
          </p>
          <p class="why-mission">
            Our mission is to focus on the needs of players, and leverage tools across software, data and AI to provide features that unlock a deeper experience. We are committed to avoiding fake shuffles, outdated technology, and weak community involvement. Our mission is to give players and the broader poker community a platform that is transparent, empowering, and focused on more than just dealing cards.
          </p>
          <p class="why-story">
            PokerGeek started as a small project among a group of frustrated poker enthusiasts who wanted something different. What began as a private experiment quickly grew into a larger vision. Today, the platform is designed from the ground up to put control back in the players' hands.
          </p>
          <p class="why-vision">
            Our shuffle system uses real-world entropy and cryptographic randomness to eliminate manipulation. Our analytics and AI tools exist to help players understand and improve their game over time. Our product roadmap is shaped directly by the community, ensuring that our features continue to evolve in collaboration with the people who use them.
          </p>
          <p class="why-commitment">
            PokerGeek is focused on realignment, not reinvention. The goal is simple: make online poker transparent, data-driven, and player-first, so every hand is authentic and every session is about growth. To ensure the best player experience, we seek all kinds of feedback. If you see a problem, or something you feel can be improved, feel free to reach out and a member of our staff will respond!
          </p>
        </div>
      </div>
  </section>

  <section class="stats">
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-number">10,000+</div>
        <div class="stat-label">Active Players</div>
         </div>
      <div class="stat-item">
        <div class="stat-number">1M+</div>
        <div class="stat-label">Hands Played</div>
         </div>
      <div class="stat-item">
        <div class="stat-number">99.9%</div>
        <div class="stat-label">Uptime</div>
         </div>
      <div class="stat-item">
        <div class="stat-number">$0</div>
        <div class="stat-label">Rake</div>
       </div>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-content">
      <a href="/" class="footer-logo">PokerGeek.ai</a>
      <p class="footer-desc">Building the world's most transparent poker platform with provably fair shuffling and cryptographic verification.</p>
      <div class="footer-links">
        <a href="#privacy">Privacy Policy</a>
        <a href="#terms">Terms of Service</a>
        <a href="#support">Support</a>
        <a href="#contact">Contact</a>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 PokerGeek.ai. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Liquid Glass Controls -->
  <div class="glass-controls">
    <h3>Liquid Glass Controls</h3>
    <div>
      <label>Shadow Blur:</label>
      <input type="range" min="0" max="30" value="20" id="shadow-blur">
    </div>
    <div>
      <label>Tint Opacity:</label>
      <input type="range" min="0" max="20" value="5" id="tint-opacity">
    </div>
    <div>
      <label>Frost Blur:</label>
      <input type="range" min="0" max="30" value="20" id="frost-blur">
    </div>
    <div>
      <label>Distortion:</label>
      <input type="range" min="0" max="100" value="77" id="distortion-strength">
    </div>
    <div class="button-group">
      <button id="lock-values">ğŸ”“ Lock</button>
      <button onclick="toggleControls()">Hide</button>
    </div>
  </div>

  <!-- Login/Signup Modal -->
  <div id="loginModal" class="modal-overlay">
    <div class="modal-box">
      <button class="modal-close" onclick="closeLoginModal()">&times;</button>
      
      <div class="modal-header">
        <h2 class="modal-title">Welcome Back</h2>
        <p class="modal-subtitle">Sign in to your account to continue playing</p>
      </div>

      <div class="modal-tabs">
        <button class="modal-tab active" onclick="switchModalTab('login')">Login</button>
        <button class="modal-tab" onclick="switchModalTab('signup')">Sign Up</button>
      </div>

      <!-- Login Form -->
      <div id="loginForm" class="modal-form active">
        <!-- Google Auth Button -->
        <button class="btn-google" onclick="handleGoogleAuth()">
          <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>
        
        <div class="divider">
          <span>or</span>
          </div>
          
          <div class="form-group">
          <label class="form-label">Email Address</label>
          <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email address" required>
          <div class="form-error" id="loginEmailError"></div>
          </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <div class="password-input">
            <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">ğŸ‘ï¸</button>
          </div>
          <div class="form-error" id="loginPasswordError"></div>
        </div>
          <div class="form-options">
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="remember">
            <label class="checkbox-label" for="remember">Remember me for 30 days</label>
          </div>
          <a href="#" class="forgot-link" onclick="showForgotPassword()">Forgot password?</a>
        </div>
        <button class="btn-submit" onclick="handleLogin()">Sign In to PokerGeek</button>
        <div class="form-footer">
          <p>Don't have an account? <a href="#" onclick="switchModalTab('signup')">Create one here</a></p>
        </div>
          </div>

      <!-- Signup Form -->
      <div id="signupForm" class="modal-form">
        <!-- Google Auth Button -->
        <button class="btn-google" onclick="handleGoogleAuth()">
          <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Sign up with Google
        </button>

        <div class="divider">
          <span>or</span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">First Name</label>
            <input type="text" class="form-input" id="signupFirstName" placeholder="First name" required>
            <div class="form-error" id="signupFirstNameError"></div>
        </div>
          <div class="form-group">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-input" id="signupLastName" placeholder="Last name" required>
            <div class="form-error" id="signupLastNameError"></div>
      </div>
        </div>
          <div class="form-group">
          <label class="form-label">Email Address</label>
          <input type="email" class="form-input" id="signupEmail" placeholder="Enter your email address" required>
          <div class="form-error" id="signupEmailError"></div>
          </div>
          <div class="form-group">
          <label class="form-label">Username</label>
          <input type="text" class="form-input" id="signupUsername" placeholder="Choose a unique username" required>
          <div class="form-error" id="signupUsernameError"></div>
          </div>
          <div class="form-group">
          <label class="form-label">Password</label>
          <div class="password-input">
            <input type="password" class="form-input" id="signupPassword" placeholder="Create a strong password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('signupPassword')">ğŸ‘ï¸</button>
          </div>
          <div class="password-strength" id="passwordStrength"></div>
          <div class="form-error" id="signupPasswordError"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Confirm Password</label>
          <div class="password-input">
            <input type="password" class="form-input" id="signupConfirmPassword" placeholder="Confirm your password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('signupConfirmPassword')">ğŸ‘ï¸</button>
          </div>
          <div class="form-error" id="signupConfirmPasswordError"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Date of Birth</label>
          <input type="date" class="form-input" id="signupBirthDate" required>
          <div class="form-error" id="signupBirthDateError"></div>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" class="checkbox" id="terms" required>
          <label class="checkbox-label" for="terms">I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a></label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" class="checkbox" id="newsletter">
          <label class="checkbox-label" for="newsletter">Send me updates about new features and promotions</label>
        </div>
        <button class="btn-submit" onclick="handleSignup()">Create Account</button>
        <div class="form-footer">
          <p>Already have an account? <a href="#" onclick="switchModalTab('login')">Sign in here</a></p>
        </div>
      </div>
    </div>
          </div>

  <!-- Forgot Password Modal -->
  <div id="forgotPasswordModal" class="modal-overlay" style="display: none;">
    <div class="modal-box">
      <button class="modal-close" onclick="closeForgotPassword()">&times;</button>
      <div class="forgot-title">Reset Password</div>
      <div class="forgot-subtitle">Enter your email address and we'll send you a link to reset your password.</div>
          <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-input" placeholder="Enter your email">
      </div>
      <button class="btn-submit" onclick="handleForgotPassword()">Send Reset Link</button>
    </div>
          </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal-overlay" style="display: none;">
    <div class="modal-box settings-modal">
      <button class="modal-close" onclick="closeSettingsModal()">&times;</button>
      
      <div class="modal-header">
        <h2 class="modal-title">Account Settings</h2>
        <p class="modal-subtitle">Manage your profile and preferences</p>
          </div>

      <div class="settings-tabs">
        <button class="settings-tab active" onclick="switchSettingsTab('profile')">Profile</button>
        <button class="settings-tab" onclick="switchSettingsTab('security')">Security</button>
        <button class="settings-tab" onclick="switchSettingsTab('preferences')">Preferences</button>
        <button class="settings-tab" onclick="switchSettingsTab('notifications')">Notifications</button>
      </div>
      
      <!-- Profile Tab -->
      <div id="profileTab" class="settings-content active">
        <div class="profile-section">
          <h3 class="section-title">Profile Information</h3>
          
          <div class="avatar-section">
            <div class="current-avatar" id="currentAvatar">ğŸ‘¤</div>
            <div class="avatar-options">
              <h4>Choose Avatar</h4>
              <div class="avatar-grid">
                <div class="avatar-option" onclick="selectAvatar('ğŸ‘¤')">ğŸ‘¤</div>
                <div class="avatar-option" onclick="selectAvatar('ğŸ¯')">ğŸ¯</div>
                <div class="avatar-option" onclick="selectAvatar('ğŸ‘‘')">ğŸ‘‘</div>
                <div class="avatar-option" onclick="selectAvatar('ğŸƒ')">ğŸƒ</div>
                <div class="avatar-option" onclick="selectAvatar('ğŸ’')">ğŸ’</div>
                <div class="avatar-option" onclick="selectAvatar('âš¡')">âš¡</div>
                <div class="avatar-option" onclick="selectAvatar('ğŸ®')">ğŸ®</div>
                <div class="avatar-option" onclick="selectAvatar('ğŸ†')">ğŸ†</div>
              </div>
            </div>
        </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">First Name</label>
              <input type="text" class="form-input" id="settingsFirstName" placeholder="First name">
            </div>
            <div class="form-group">
              <label class="form-label">Last Name</label>
              <input type="text" class="form-input" id="settingsLastName" placeholder="Last name">
        </div>
      </div>

          <div class="form-group">
            <label class="form-label">Username</label>
            <input type="text" class="form-input" id="settingsUsername" placeholder="Username">
          </div>
          
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" id="settingsEmail" placeholder="Email address">
          </div>

          <div class="form-group">
            <label class="form-label">Bio</label>
            <textarea class="form-input" id="settingsBio" placeholder="Tell us about yourself..." rows="3"></textarea>
      </div>
    </div>
  </div>

      <!-- Security Tab -->
      <div id="securityTab" class="settings-content">
        <div class="security-section">
          <h3 class="section-title">Security Settings</h3>
          
          <div class="form-group">
            <label class="form-label">Current Password</label>
            <div class="password-input">
              <input type="password" class="form-input" id="currentPassword" placeholder="Enter current password">
              <button type="button" class="password-toggle" onclick="togglePassword('currentPassword')">ğŸ‘ï¸</button>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">New Password</label>
            <div class="password-input">
              <input type="password" class="form-input" id="newPassword" placeholder="Enter new password">
              <button type="button" class="password-toggle" onclick="togglePassword('newPassword')">ğŸ‘ï¸</button>
            </div>
            <div class="password-strength" id="settingsPasswordStrength"></div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Confirm New Password</label>
            <div class="password-input">
              <input type="password" class="form-input" id="confirmNewPassword" placeholder="Confirm new password">
              <button type="button" class="password-toggle" onclick="togglePassword('confirmNewPassword')">ğŸ‘ï¸</button>
            </div>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="twoFactor">
            <label class="checkbox-label" for="twoFactor">Enable Two-Factor Authentication</label>
          </div>
        </div>
      </div>
      
      <!-- Preferences Tab -->
      <div id="preferencesTab" class="settings-content">
        <div class="preferences-section">
          <h3 class="section-title">Game Preferences</h3>
          
          <div class="form-group">
            <label class="form-label">Default Stakes</label>
            <select class="form-input" id="defaultStakes">
              <option value="micro">Micro ($0.01/$0.02)</option>
              <option value="low">Low ($0.05/$0.10)</option>
              <option value="medium">Medium ($0.25/$0.50)</option>
              <option value="high">High ($1/$2)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Preferred Game Type</label>
            <select class="form-input" id="gameType">
              <option value="holdem">No Limit Hold'em</option>
              <option value="omaha">Pot Limit Omaha</option>
              <option value="tournament">Tournament</option>
            </select>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="autoMuck">
            <label class="checkbox-label" for="autoMuck">Auto-muck losing hands</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="showCards">
            <label class="checkbox-label" for="showCards">Show cards after hand</label>
          </div>
        </div>
      </div>
      
      <!-- Notifications Tab -->
      <div id="notificationsTab" class="settings-content">
        <div class="notifications-section">
          <h3 class="section-title">Notification Preferences</h3>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="emailNotifications">
            <label class="checkbox-label" for="emailNotifications">Email notifications</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="gameInvites">
            <label class="checkbox-label" for="gameInvites">Game invitations</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="friendRequests">
            <label class="checkbox-label" for="friendRequests">Friend requests</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="tournamentUpdates">
            <label class="checkbox-label" for="tournamentUpdates">Tournament updates</label>
          </div>
        </div>
      </div>
      
      <div class="settings-actions">
        <button class="btn btn-secondary" onclick="closeSettingsModal()">Cancel</button>
        <button class="btn btn-danger" onclick="handleLogout()">Logout</button>
        <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Global animations -->
  <script src="/js/global-animations.js"></script>
  <script>
    // Landing page: Initialize with wave + ongoing
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof initFallingFX === 'function') {
        initFallingFX(); // Full wave + ongoing
    }
  });

  // Liquid Glass Controls
    let isLocked = false;
    
  function toggleControls() {
    const controls = document.querySelector('.glass-controls');
      const button = controls.querySelector('button[onclick="toggleControls()"]');
    
    if (controls.style.display === 'none') {
      controls.style.display = 'block';
        button.textContent = 'Hide';
    } else {
      controls.style.display = 'none';
        button.textContent = 'Show';
      }
    }
    
    function toggleLock() {
      isLocked = !isLocked;
      const lockButton = document.getElementById('lock-values');
      const shadowBlur = document.getElementById('shadow-blur');
      const tintOpacity = document.getElementById('tint-opacity');
      const frostBlur = document.getElementById('frost-blur');
      const distortionStrength = document.getElementById('distortion-strength');
      
      lockButton.textContent = isLocked ? 'ğŸ”’ Unlock' : 'ğŸ”“ Lock';
      lockButton.style.background = isLocked ? 'var(--warning)' : 'var(--teal)';
      
      // Disable/enable sliders
      [shadowBlur, tintOpacity, frostBlur, distortionStrength].forEach(slider => {
        slider.disabled = isLocked;
        slider.style.opacity = isLocked ? '0.5' : '1';
      });
    }

  // Initialize liquid glass controls
  document.addEventListener('DOMContentLoaded', function() {
    const root = document.documentElement;
    
    function updateGlassVar(name, value) {
        if (isLocked) return;
      root.style.setProperty(name, value);
    }
    
    function updateSVG() {
        if (isLocked) return;
        
      const distortionStrength = document.getElementById('distortion-strength')?.value || 77;
      const noiseFrequency = document.getElementById('noise-frequency')?.value || 0.008;
      
      const displacementMap = document.querySelector('feDisplacementMap');
      const turbulence = document.querySelector('feTurbulence');
      
      if (displacementMap) displacementMap.setAttribute('scale', distortionStrength);
      if (turbulence) turbulence.setAttribute('baseFrequency', `${noiseFrequency} ${noiseFrequency}`);
    }
    
    // Control mappings
    const controls = {
      'shadow-blur': ['--glass-shadow-blur', v => v + 'px'],
      'tint-opacity': ['--glass-tint-opacity', v => (v / 100)],
      'frost-blur': ['--glass-frost-blur', v => v + 'px'],
      'distortion-strength': ['--glass-distortion-strength', v => v]
    };
    
    // Add event listeners
    Object.keys(controls).forEach(id => {
      const input = document.getElementById(id);
      if (input) {
        input.addEventListener('input', (e) => {
          const [cssVar, formatter] = controls[id];
          updateGlassVar(cssVar, formatter(e.target.value));
          updateSVG();
        });
      }
    });
      
      // Add lock button event listener
      const lockButton = document.getElementById('lock-values');
      if (lockButton) {
        lockButton.addEventListener('click', toggleLock);
      }
    });

    // Auth state management
    let isLoggedIn = false;
    let currentUser = null;

    // Check if user is logged in on page load
    function checkAuthState() {
      const savedUser = localStorage.getItem('pokerUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        isLoggedIn = true;
        updateNavbarForLoggedInUser();
      }
    }

    // Update navbar to show user menu instead of login/signup
    function updateNavbarForLoggedInUser() {
      document.getElementById('navbarAuth').style.display = 'none';
      document.getElementById('navbarUser').style.display = 'flex';
      document.getElementById('userName').textContent = currentUser.username || currentUser.name || 'User';
      document.getElementById('userAvatar').textContent = currentUser.avatar || 'ğŸ‘¤';
    }

    // Update navbar to show login/signup buttons
    function updateNavbarForLoggedOutUser() {
      document.getElementById('navbarAuth').style.display = 'flex';
      document.getElementById('navbarUser').style.display = 'none';
    }

    // Modal functions
    function openLoginModal() {
      document.getElementById('loginModal').classList.add('show');
      document.body.style.overflow = 'hidden';
      switchModalTab('login');
    }

    function closeLoginModal() {
      document.getElementById('loginModal').classList.remove('show');
      document.body.style.overflow = '';
      clearFormErrors();
    }

    function switchModalTab(tab) {
      // Remove active class from all tabs and forms
      document.querySelectorAll('.modal-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.modal-form').forEach(f => f.classList.remove('active'));
      
      // Add active class to selected tab and form
      event.target.classList.add('active');
      document.getElementById(tab + 'Form').classList.add('active');
      clearFormErrors();
    }

    function showForgotPassword() {
      document.getElementById('loginModal').style.display = 'none';
      document.getElementById('forgotPasswordModal').style.display = 'flex';
    }

    function closeForgotPassword() {
      document.getElementById('forgotPasswordModal').style.display = 'none';
      document.getElementById('loginModal').style.display = 'flex';
    }

    // Form validation
    function clearFormErrors() {
      document.querySelectorAll('.form-error').forEach(error => {
        error.textContent = '';
      });
    }

    function showError(fieldId, message) {
      const errorElement = document.getElementById(fieldId + 'Error');
      if (errorElement) {
        errorElement.textContent = message;
      }
    }

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function validatePassword(password) {
      return password.length >= 8;
    }

    function updatePasswordStrength(password) {
      const strengthElement = document.getElementById('passwordStrength');
      if (!strengthElement) return;

      strengthElement.className = 'password-strength';
      
      if (password.length < 6) {
        strengthElement.classList.add('weak');
      } else if (password.length < 8) {
        strengthElement.classList.add('fair');
      } else if (password.length < 12) {
        strengthElement.classList.add('good');
      } else {
        strengthElement.classList.add('strong');
      }
    }

    // Password toggle functionality
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const button = input.parentNode.querySelector('.password-toggle');
      
      if (input.type === 'password') {
        input.type = 'text';
        button.textContent = 'ğŸ™ˆ';
      } else {
        input.type = 'password';
        button.textContent = 'ğŸ‘ï¸';
      }
    }

    // Mock Auth - Instant login for demo purposes
    function handleGoogleAuth() {
      // Generate random user data for demo
      const mockUsers = [
        { name: 'Alex Johnson', username: 'alexj', email: 'alex@example.com', avatar: 'ğŸ¯' },
        { name: 'Sarah Wilson', username: 'sarahw', email: 'sarah@example.com', avatar: 'ğŸ‘‘' },
        { name: 'Mike Chen', username: 'mikec', email: 'mike@example.com', avatar: 'ğŸƒ' },
        { name: 'Emma Davis', username: 'emmad', email: 'emma@example.com', avatar: 'ğŸ’' },
        { name: 'Chris Taylor', username: 'christ', email: 'chris@example.com', avatar: 'âš¡' }
      ];
      
      const randomUser = mockUsers[Math.floor(Math.random() * mockUsers.length)];
      randomUser.provider = 'google';
      
      currentUser = randomUser;
      isLoggedIn = true;
      localStorage.setItem('pokerUser', JSON.stringify(randomUser));
      
      updateNavbarForLoggedInUser();
      closeLoginModal();
      
      // Show success notification
      showNotification(`Welcome back, ${randomUser.name}!`, 'success');
    }

    // Mock Login - Instant login with any email/password
    function handleLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      // Simple validation for demo
      if (!email || !password) {
        showNotification('Please enter both email and password', 'error');
        return;
      }
      
      // Generate user data based on email
      const username = email.split('@')[0];
      const name = username.charAt(0).toUpperCase() + username.slice(1) + ' User';
      
      const mockUser = {
        name: name,
        username: username,
        email: email,
        avatar: 'ğŸ‘¤',
        provider: 'email'
      };
      
      currentUser = mockUser;
      isLoggedIn = true;
      localStorage.setItem('pokerUser', JSON.stringify(mockUser));
      
      updateNavbarForLoggedInUser();
      closeLoginModal();
      
      showNotification(`Welcome back, ${name}!`, 'success');
    }

    // Mock Signup - Instant signup with any data
    function handleSignup() {
      const firstName = document.getElementById('signupFirstName').value;
      const lastName = document.getElementById('signupLastName').value;
      const email = document.getElementById('signupEmail').value;
      const username = document.getElementById('signupUsername').value;
      const password = document.getElementById('signupPassword').value;
      const confirmPassword = document.getElementById('signupConfirmPassword').value;
      const birthDate = document.getElementById('signupBirthDate').value;
      const terms = document.getElementById('terms').checked;
      
      // Basic validation for demo
      if (!firstName || !lastName || !email || !username || !password) {
        showNotification('Please fill in all required fields', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        showNotification('Passwords do not match', 'error');
        return;
      }
      
      if (!terms) {
        showNotification('Please agree to the Terms of Service', 'error');
        return;
      }
      
      // Create user with provided data
      const mockUser = {
        name: `${firstName} ${lastName}`,
        username: username,
        email: email,
        avatar: 'ğŸ‘¤',
        provider: 'email',
        birthDate: birthDate
      };
      
      currentUser = mockUser;
      isLoggedIn = true;
      localStorage.setItem('pokerUser', JSON.stringify(mockUser));
      
      updateNavbarForLoggedInUser();
      closeLoginModal();
      
      showNotification(`Welcome to PokerGeek, ${firstName}!`, 'success');
    }

    // Notification system
    function showNotification(message, type = 'info') {
      // Remove existing notifications
      const existing = document.querySelector('.notification');
      if (existing) {
        existing.remove();
      }
      
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.innerHTML = `
        <div class="notification-content">
          <span class="notification-icon">${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</span>
          <span class="notification-message">${message}</span>
        </div>
      `;
      
      // Add to page
      document.body.appendChild(notification);
      
      // Show notification
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);
      
      // Auto remove after 3 seconds
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 300);
      }, 3000);
    }

    function handleForgotPassword() {
      const email = document.querySelector('#forgotPasswordModal input[type="email"]').value;
      if (!email) {
        alert('Please enter your email address');
        return;
      }
      
      if (!validateEmail(email)) {
        alert('Please enter a valid email address');
        return;
      }
      
      alert('Password reset email sent to ' + email);
      closeForgotPassword();
    }

    // Settings Modal Functions
    function openSettingsModal() {
      document.getElementById('settingsModal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
      loadUserSettings();
    }

    function closeSettingsModal() {
      document.getElementById('settingsModal').style.display = 'none';
      document.body.style.overflow = '';
    }

    function switchSettingsTab(tab) {
      // Remove active class from all tabs and content
      document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.settings-content').forEach(c => c.classList.remove('active'));
      
      // Add active class to clicked tab and corresponding content
      event.target.classList.add('active');
      document.getElementById(tab + 'Tab').classList.add('active');
    }

    function loadUserSettings() {
      if (!currentUser) return;
      
      // Load profile data
      const nameParts = currentUser.name.split(' ');
      document.getElementById('settingsFirstName').value = nameParts[0] || '';
      document.getElementById('settingsLastName').value = nameParts.slice(1).join(' ') || '';
      document.getElementById('settingsUsername').value = currentUser.username || '';
      document.getElementById('settingsEmail').value = currentUser.email || '';
      document.getElementById('settingsBio').value = currentUser.bio || '';
      document.getElementById('currentAvatar').textContent = currentUser.avatar || 'ğŸ‘¤';
      
      // Load preferences
      document.getElementById('defaultStakes').value = currentUser.defaultStakes || 'micro';
      document.getElementById('gameType').value = currentUser.gameType || 'holdem';
      document.getElementById('autoMuck').checked = currentUser.autoMuck || false;
      document.getElementById('showCards').checked = currentUser.showCards || false;
      
      // Load notification preferences
      document.getElementById('emailNotifications').checked = currentUser.emailNotifications !== false;
      document.getElementById('gameInvites').checked = currentUser.gameInvites !== false;
      document.getElementById('friendRequests').checked = currentUser.friendRequests !== false;
      document.getElementById('tournamentUpdates').checked = currentUser.tournamentUpdates !== false;
    }

    function selectAvatar(avatar) {
      document.getElementById('currentAvatar').textContent = avatar;
      // Add visual feedback
      document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.remove('selected');
      });
      event.target.classList.add('selected');
    }

    function saveSettings() {
      if (!currentUser) return;
      
      // Update profile data
      const firstName = document.getElementById('settingsFirstName').value;
      const lastName = document.getElementById('settingsLastName').value;
      const username = document.getElementById('settingsUsername').value;
      const email = document.getElementById('settingsEmail').value;
      const bio = document.getElementById('settingsBio').value;
      const avatar = document.getElementById('currentAvatar').textContent;
      
      // Basic validation
      if (!firstName || !lastName || !username || !email) {
        showNotification('Please fill in all required fields', 'error');
        return;
      }
      
      // Update user object
      currentUser.name = `${firstName} ${lastName}`;
      currentUser.username = username;
      currentUser.email = email;
      currentUser.bio = bio;
      currentUser.avatar = avatar;
      
      // Update preferences
      currentUser.defaultStakes = document.getElementById('defaultStakes').value;
      currentUser.gameType = document.getElementById('gameType').value;
      currentUser.autoMuck = document.getElementById('autoMuck').checked;
      currentUser.showCards = document.getElementById('showCards').checked;
      
      // Update notification preferences
      currentUser.emailNotifications = document.getElementById('emailNotifications').checked;
      currentUser.gameInvites = document.getElementById('gameInvites').checked;
      currentUser.friendRequests = document.getElementById('friendRequests').checked;
      currentUser.tournamentUpdates = document.getElementById('tournamentUpdates').checked;
      
      // Save to localStorage
      localStorage.setItem('pokerUser', JSON.stringify(currentUser));
      
      // Update navbar
      updateNavbarForLoggedInUser();
      
      // Close modal and show success
      closeSettingsModal();
      showNotification('Settings saved successfully!', 'success');
    }

    function handleLogout() {
      currentUser = null;
      isLoggedIn = false;
      localStorage.removeItem('pokerUser');
      
      updateNavbarForLoggedOutUser();
      showNotification('Successfully logged out!', 'success');
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
      const userMenu = document.querySelector('.user-menu');
      const dropdown = document.getElementById('userDropdown');
      
      if (userMenu && !userMenu.contains(event.target)) {
        dropdown.classList.remove('show');
      }
    });

    // Password strength monitoring
    document.addEventListener('DOMContentLoaded', function() {
      const passwordInput = document.getElementById('signupPassword');
      if (passwordInput) {
        passwordInput.addEventListener('input', function() {
          updatePasswordStrength(this.value);
        });
      }
      
      // Check auth state on page load
      checkAuthState();
    });

    // Close modal when clicking outside
    window.onclick = function(event) {
      const loginModal = document.getElementById('loginModal');
      const forgotModal = document.getElementById('forgotPasswordModal');
      if (event.target === loginModal) {
        closeLoginModal();
      }
      if (event.target === forgotModal) {
        closeForgotPassword();
      }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeLoginModal();
      }
    });

    // Liquid Glass Controls (duplicate removed)

  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const t=document.querySelector(a.getAttribute('href'));
      if(t){ e.preventDefault(); t.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
  });

  const observer=new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        entry.target.style.opacity='1';
        entry.target.style.transform='translateY(0)';
      }
    });
  },{threshold:0.1, rootMargin:'0px 0px -50px 0px'});

  document.querySelectorAll('.feature-card,.stat-item').forEach(el=>{
    el.style.opacity='0'; el.style.transform='translateY(30px)';
    el.style.transition='opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
  });

  </script>

  <!-- Liquid Glass SVG Filter -->
  <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="position:absolute; overflow:hidden">
    <defs>
      <filter id="glass-distortion" x="0%" y="0%" width="100%" height="100%">
        <feTurbulence type="fractalNoise" baseFrequency="0.008 0.008" numOctaves="2" seed="92" result="noise" />
        <feGaussianBlur in="noise" stdDeviation="2" result="blurred" />
        <feDisplacementMap in="SourceGraphic" in2="blurred" scale="77" xChannelSelector="R" yChannelSelector="G" />
      </filter>
    </defs>
  </svg>
</body>
</html>
