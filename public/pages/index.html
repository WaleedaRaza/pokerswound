<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PokerGeek.ai ‚Äî Elite Poker Lounge</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/pokergeek.css">

<!-- All styles moved to global style.css -->
</head>
<body>
  <div class="bg-animation"></div>
  <div class="floating-cards" id="floating-cards"></div>

  <!-- CONSOLIDATED NAVBAR -->
  <nav class="navbar">
    <a href="/" class="navbar-brand">PokerGeek.ai</a>
        <ul class="navbar-links">
            <li><a href="/">Home</a></li>
            <li><a href="/play">Play Now</a></li>
        <li><a href="/friends">Friends</a></li>
            <li><a href="/ai-solver">AI Solver</a></li>
            <li><a href="/analysis">Analysis</a></li>
            <li><a href="/learning">Learning</a></li>
            <li><a href="/poker-today">Poker Today</a></li>
      </ul>
        <div class="navbar-auth" id="navbarAuth">
            <a href="#" class="navbar-btn navbar-btn-login" onclick="openLoginModal()">Log In</a>
            <a href="#" class="navbar-btn navbar-btn-signup" onclick="openLoginModal()">Sign Up</a>
        </div>
        
        <!-- User Profile Tile (shown when logged in) -->
        <div class="navbar-user" id="navbarUser" style="display: none;">
            <div class="user-profile-tile liquid-glass-tile" onclick="toggleUserDropdown()">
                <div class="user-avatar" id="userAvatar">üë§</div>
                <div class="user-info">
                    <div class="user-name" id="userName">Username</div>
                    <div class="user-status">Online</div>
                </div>
                <div class="user-menu-icon">‚öôÔ∏è</div>
      </div>
      
      <!-- User Dropdown Menu -->
      <div id="userDropdown" class="user-dropdown" style="display: none; position: absolute; top: 60px; right: 20px; background: rgba(20,20,40,0.98); border-radius: 10px; padding: 1rem; min-width: 250px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); z-index: 1000;">
        <div style="border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1rem; margin-bottom: 1rem;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <div id="dropdownAvatar" style="font-size: 3rem;">üë§</div>
            <div>
              <div id="dropdownUsername" style="color: #fff; font-weight: bold; font-size: 1.1rem;">Username</div>
              <div id="dropdownEmail" style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">user@example.com</div>
            </div>
          </div>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
          <button onclick="openProfileSettings()" style="padding: 0.75rem; background: rgba(255,255,255,0.05); border: none; border-radius: 5px; color: #fff; cursor: pointer; text-align: left; transition: 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'">
            üë§ Profile Settings
          </button>
          <button onclick="openChangeUsername()" style="padding: 0.75rem; background: rgba(255,255,255,0.05); border: none; border-radius: 5px; color: #fff; cursor: pointer; text-align: left; transition: 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'">
            ‚úèÔ∏è Change Username
          </button>
          <button onclick="openChangePassword()" style="padding: 0.75rem; background: rgba(255,255,255,0.05); border: none; border-radius: 5px; color: #fff; cursor: pointer; text-align: left; transition: 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'">
            üîí Change Password
          </button>
          <button onclick="openAvatarPicker()" style="padding: 0.75rem; background: rgba(255,255,255,0.05); border: none; border-radius: 5px; color: #fff; cursor: pointer; text-align: left; transition: 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'">
            üòä Change Avatar
          </button>
          <button onclick="handleLogout()" style="padding: 0.75rem; background: rgba(220,53,69,0.2); border: none; border-radius: 5px; color: #dc3545; cursor: pointer; text-align: left; font-weight: bold; transition: 0.2s;" onmouseover="this.style.background='rgba(220,53,69,0.3)'" onmouseout="this.style.background='rgba(220,53,69,0.2)'">
            üö™ Logout
          </button>
        </div>
      </div>
    </div>
  </nav>

  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-title">PokerGeek<span class="suit-symbol">‚ô†</span>ai</h1>
      <p class="hero-subtitle"><b>
        The all in one Poker platform 
        <br>Provably fair shuffling
        <br>Data driven, AI powered
        <br></b>
      </p>
      <p class="hero-description">
        Experience the future of online poker with our cutting-edge platform featuring 
        provably fair shuffling, AI-powered analysis, and transparent gameplay.
      </p>
      <div class="cta-buttons">
        <a href="/play" class="btn btn-primary">Play Now</a>
        <a href="#" class="btn btn-secondary" onclick="openLoginModal(); return false;">Log In / Sign Up</a>
        <a href="/friends" class="btn btn-secondary">Add Friends</a>
      </div>
    </div>
  </section>

  <section class="features">
    <h2 class="features-title">Why Choose PokerGeek.ai?</h2>
    <div class="liquid-tiles-container">
      <div class="liquid-glass-tile">
        <div class="tile-icon">üîê</div>
        <h3 class="tile-title">Provably Fair Shuffling</h3>
        <p class="tile-description">Entropy from real-world sources + crypto randomness. Verify any shuffle independently.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">‚ö°</div>
        <h3 class="tile-title">Real-Time Multiplayer</h3>
        <p class="tile-description">Sub-100ms WebSockets for private rooms, public games, and tournaments.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">ü§ñ</div>
        <h3 class="tile-title">GTO + LLM</h3>
        <p class="tile-description">GTO solver fused with LLM coaching for strategy and study.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">üìä</div>
        <h3 class="tile-title">Audit Trail</h3>
        <p class="tile-description">Every action + shuffle logged and auditable.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">üìà</div>
        <h3 class="tile-title">Performance</h3>
        <p class="tile-description">Deep stats after 1000+ hands: VPIP, PFR, AF, position, etc.</p>
      </div>
      <div class="liquid-glass-tile">
        <div class="tile-icon">üõ°Ô∏è</div>
        <h3 class="tile-title">Anti-Cheat</h3>
        <p class="tile-description">Timing & behavior analysis, multi-account prevention, collusion monitoring.</p>
      </div>
    </div>
  </section>

  <section class="why-pokergeek">
    <div class="why-content">
      <h2 class="why-title">Why PokerGeek?</h2>
      <div class="why-story">
          <p class="why-intro">
            PokerGeek aims to leverage AI, data, and a deep focus on real poker players to deliver a holistic, all-in-one platform built around the full poker world. The platform supports private and public gameplay, comprehensive performance analytics, GTO and AI-driven coaching, social features, and more.
          </p>
          <p class="why-mission">
            Our mission is to focus on the needs of players, and leverage tools across software, data and AI to provide features that unlock a deeper experience. We are committed to avoiding fake shuffles, outdated technology, and weak community involvement. Our mission is to give players and the broader poker community a platform that is transparent, empowering, and focused on more than just dealing cards.
          </p>
          <p class="why-story">
            PokerGeek started as a small project among a group of frustrated poker enthusiasts who wanted something different. What began as a private experiment quickly grew into a larger vision. Today, the platform is designed from the ground up to put control back in the players' hands.
          </p>
          <p class="why-vision">
            Our shuffle system uses real-world entropy and cryptographic randomness to eliminate manipulation. Our analytics and AI tools exist to help players understand and improve their game over time. Our product roadmap is shaped directly by the community, ensuring that our features continue to evolve in collaboration with the people who use them.
          </p>
          <p class="why-commitment">
            PokerGeek is focused on realignment, not reinvention. The goal is simple: make online poker transparent, data-driven, and player-first, so every hand is authentic and every session is about growth. To ensure the best player experience, we seek all kinds of feedback. If you see a problem, or something you feel can be improved, feel free to reach out and a member of our staff will respond!
          </p>
        </div>
      </div>
  </section>

  <section class="stats">
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-number">10,000+</div>
        <div class="stat-label">Active Players</div>
         </div>
      <div class="stat-item">
        <div class="stat-number">1M+</div>
        <div class="stat-label">Hands Played</div>
         </div>
      <div class="stat-item">
        <div class="stat-number">99.9%</div>
        <div class="stat-label">Uptime</div>
         </div>
      <div class="stat-item">
        <div class="stat-number">$0</div>
        <div class="stat-label">Rake</div>
       </div>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-content">
      <a href="index.html" class="footer-logo">PokerGeek.ai</a>
      <p class="footer-desc">Building the world's most transparent poker platform with provably fair shuffling and cryptographic verification.</p>
      <div class="footer-links">
        <a href="#privacy">Privacy Policy</a>
        <a href="#terms">Terms of Service</a>
        <a href="#support">Support</a>
        <a href="#contact">Contact</a>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 PokerGeek.ai. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Liquid Glass Controls -->
  <div class="glass-controls">
    <h3>Liquid Glass Controls</h3>
    <div>
      <label>Shadow Blur:</label>
      <input type="range" min="0" max="30" value="20" id="shadow-blur">
    </div>
    <div>
      <label>Tint Opacity:</label>
      <input type="range" min="0" max="20" value="5" id="tint-opacity">
    </div>
    <div>
      <label>Frost Blur:</label>
      <input type="range" min="0" max="30" value="20" id="frost-blur">
    </div>
    <div>
      <label>Distortion:</label>
      <input type="range" min="0" max="100" value="77" id="distortion-strength">
    </div>
    <div class="button-group">
      <button id="lock-values">üîì Lock</button>
      <button onclick="toggleControls()">Hide</button>
    </div>
  </div>

  <!-- Login/Signup Modal -->
  <div id="loginModal" class="modal-overlay">
    <div class="modal-box">
      <button class="modal-close" onclick="closeLoginModal()">&times;</button>
      
      <div class="modal-header">
        <h2 class="modal-title">Welcome Back</h2>
        <p class="modal-subtitle">Sign in to your account to continue playing</p>
      </div>

      <div class="modal-tabs">
        <button class="modal-tab active" onclick="switchModalTab('login')">Login</button>
        <button class="modal-tab" onclick="switchModalTab('signup')">Sign Up</button>
      </div>

      <!-- Login Form -->
      <div id="loginForm" class="modal-form active">
        <!-- Google Auth Button -->
        <button class="btn-google" onclick="handleGoogleAuth()">
          <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>
        
        <button class="btn btn-secondary" onclick="handleGuestSignIn()" style="width: 100%; padding: 0.75rem; margin-top: 0.5rem; background: rgba(108,117,125,0.2); border: 1px solid rgba(108,117,125,0.5); color: #fff;">
          üë§ Continue as Guest
        </button>
        
        <div class="divider">
          <span>or</span>
          </div>
          
          <div class="form-group">
          <label class="form-label">Email Address</label>
          <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email address" required>
          <div class="form-error" id="loginEmailError"></div>
          </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <div class="password-input">
            <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">üëÅÔ∏è</button>
          </div>
          <div class="form-error" id="loginPasswordError"></div>
        </div>
          <div class="form-options">
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="remember">
            <label class="checkbox-label" for="remember">Remember me for 30 days</label>
          </div>
          <a href="#" class="forgot-link" onclick="showForgotPassword()">Forgot password?</a>
        </div>
        <button class="btn-submit" onclick="handleLogin()">Sign In to PokerGeek</button>
        <div class="form-footer">
          <p>Don't have an account? <a href="#" onclick="switchModalTab('signup')">Create one here</a></p>
        </div>
          </div>

      <!-- Signup Form -->
      <div id="signupForm" class="modal-form">
        <!-- Google Auth Button -->
        <button class="btn-google" onclick="handleGoogleAuth()">
          <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Sign up with Google
        </button>

        <div class="divider">
          <span>or</span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">First Name</label>
            <input type="text" class="form-input" id="signupFirstName" placeholder="First name" required>
            <div class="form-error" id="signupFirstNameError"></div>
        </div>
          <div class="form-group">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-input" id="signupLastName" placeholder="Last name" required>
            <div class="form-error" id="signupLastNameError"></div>
      </div>
        </div>
          <div class="form-group">
          <label class="form-label">Email Address</label>
          <input type="email" class="form-input" id="signupEmail" placeholder="Enter your email address" required>
          <div class="form-error" id="signupEmailError"></div>
          </div>
          <div class="form-group">
          <label class="form-label">Username</label>
          <input type="text" class="form-input" id="signupUsername" placeholder="Choose a unique username" required>
          <div class="form-error" id="signupUsernameError"></div>
          </div>
          <div class="form-group">
          <label class="form-label">Password</label>
          <div class="password-input">
            <input type="password" class="form-input" id="signupPassword" placeholder="Create a strong password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('signupPassword')">üëÅÔ∏è</button>
          </div>
          <div class="password-strength" id="passwordStrength"></div>
          <div class="form-error" id="signupPasswordError"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Confirm Password</label>
          <div class="password-input">
            <input type="password" class="form-input" id="signupConfirmPassword" placeholder="Confirm your password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('signupConfirmPassword')">üëÅÔ∏è</button>
          </div>
          <div class="form-error" id="signupConfirmPasswordError"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Date of Birth</label>
          <input type="date" class="form-input" id="signupBirthDate" required>
          <div class="form-error" id="signupBirthDateError"></div>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" class="checkbox" id="terms" required>
          <label class="checkbox-label" for="terms">I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a></label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" class="checkbox" id="newsletter">
          <label class="checkbox-label" for="newsletter">Send me updates about new features and promotions</label>
        </div>
        <button class="btn-submit" onclick="handleSignup()">Create Account</button>
        <div class="form-footer">
          <p>Already have an account? <a href="#" onclick="switchModalTab('login')">Sign in here</a></p>
        </div>
      </div>
    </div>
          </div>

  <!-- Forgot Password Modal -->
  <div id="forgotPasswordModal" class="modal-overlay" style="display: none;">
    <div class="modal-box">
      <button class="modal-close" onclick="closeForgotPassword()">&times;</button>
      <div class="forgot-title">Reset Password</div>
      <div class="forgot-subtitle">Enter your email address and we'll send you a link to reset your password.</div>
          <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-input" placeholder="Enter your email">
      </div>
      <button class="btn-submit" onclick="handleForgotPassword()">Send Reset Link</button>
    </div>
          </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal-overlay" style="display: none;">
    <div class="modal-box settings-modal">
      <button class="modal-close" onclick="closeSettingsModal()">&times;</button>
      
      <div class="modal-header">
        <h2 class="modal-title">Account Settings</h2>
        <p class="modal-subtitle">Manage your profile and preferences</p>
          </div>

      <div class="settings-tabs">
        <button class="settings-tab active" onclick="switchSettingsTab('profile')">Profile</button>
        <button class="settings-tab" onclick="switchSettingsTab('security')">Security</button>
        <button class="settings-tab" onclick="switchSettingsTab('preferences')">Preferences</button>
        <button class="settings-tab" onclick="switchSettingsTab('notifications')">Notifications</button>
      </div>
      
      <!-- Profile Tab -->
      <div id="profileTab" class="settings-content active">
        <div class="profile-section">
          <h3 class="section-title">Profile Information</h3>
          
          <div class="avatar-section">
            <div class="current-avatar" id="currentAvatar">üë§</div>
            <div class="avatar-options">
              <h4>Choose Avatar</h4>
              <div class="avatar-grid">
                <div class="avatar-option" onclick="selectAvatar('üë§')">üë§</div>
                <div class="avatar-option" onclick="selectAvatar('üéØ')">üéØ</div>
                <div class="avatar-option" onclick="selectAvatar('üëë')">üëë</div>
                <div class="avatar-option" onclick="selectAvatar('üÉè')">üÉè</div>
                <div class="avatar-option" onclick="selectAvatar('üíé')">üíé</div>
                <div class="avatar-option" onclick="selectAvatar('‚ö°')">‚ö°</div>
                <div class="avatar-option" onclick="selectAvatar('üéÆ')">üéÆ</div>
                <div class="avatar-option" onclick="selectAvatar('üèÜ')">üèÜ</div>
              </div>
            </div>
        </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">First Name</label>
              <input type="text" class="form-input" id="settingsFirstName" placeholder="First name">
            </div>
            <div class="form-group">
              <label class="form-label">Last Name</label>
              <input type="text" class="form-input" id="settingsLastName" placeholder="Last name">
        </div>
      </div>

          <div class="form-group">
            <label class="form-label">Username</label>
            <input type="text" class="form-input" id="settingsUsername" placeholder="Username">
          </div>
          
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" id="settingsEmail" placeholder="Email address">
          </div>

          <div class="form-group">
            <label class="form-label">Bio</label>
            <textarea class="form-input" id="settingsBio" placeholder="Tell us about yourself..." rows="3"></textarea>
      </div>
    </div>
  </div>

      <!-- Security Tab -->
      <div id="securityTab" class="settings-content">
        <div class="security-section">
          <h3 class="section-title">Security Settings</h3>
          
          <div class="form-group">
            <label class="form-label">Current Password</label>
            <div class="password-input">
              <input type="password" class="form-input" id="currentPassword" placeholder="Enter current password">
              <button type="button" class="password-toggle" onclick="togglePassword('currentPassword')">üëÅÔ∏è</button>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">New Password</label>
            <div class="password-input">
              <input type="password" class="form-input" id="newPassword" placeholder="Enter new password">
              <button type="button" class="password-toggle" onclick="togglePassword('newPassword')">üëÅÔ∏è</button>
            </div>
            <div class="password-strength" id="settingsPasswordStrength"></div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Confirm New Password</label>
            <div class="password-input">
              <input type="password" class="form-input" id="confirmNewPassword" placeholder="Confirm new password">
              <button type="button" class="password-toggle" onclick="togglePassword('confirmNewPassword')">üëÅÔ∏è</button>
            </div>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="twoFactor">
            <label class="checkbox-label" for="twoFactor">Enable Two-Factor Authentication</label>
          </div>
        </div>
      </div>
      
      <!-- Preferences Tab -->
      <div id="preferencesTab" class="settings-content">
        <div class="preferences-section">
          <h3 class="section-title">Game Preferences</h3>
          
          <div class="form-group">
            <label class="form-label">Default Stakes</label>
            <select class="form-input" id="defaultStakes">
              <option value="micro">Micro ($0.01/$0.02)</option>
              <option value="low">Low ($0.05/$0.10)</option>
              <option value="medium">Medium ($0.25/$0.50)</option>
              <option value="high">High ($1/$2)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Preferred Game Type</label>
            <select class="form-input" id="gameType">
              <option value="holdem">No Limit Hold'em</option>
              <option value="omaha">Pot Limit Omaha</option>
              <option value="tournament">Tournament</option>
            </select>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="autoMuck">
            <label class="checkbox-label" for="autoMuck">Auto-muck losing hands</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="showCards">
            <label class="checkbox-label" for="showCards">Show cards after hand</label>
          </div>
        </div>
      </div>
      
      <!-- Notifications Tab -->
      <div id="notificationsTab" class="settings-content">
        <div class="notifications-section">
          <h3 class="section-title">Notification Preferences</h3>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="emailNotifications">
            <label class="checkbox-label" for="emailNotifications">Email notifications</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="gameInvites">
            <label class="checkbox-label" for="gameInvites">Game invitations</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="friendRequests">
            <label class="checkbox-label" for="friendRequests">Friend requests</label>
          </div>
          
          <div class="checkbox-group">
            <input type="checkbox" class="checkbox" id="tournamentUpdates">
            <label class="checkbox-label" for="tournamentUpdates">Tournament updates</label>
          </div>
        </div>
      </div>
      
      <div class="settings-actions">
        <button class="btn btn-secondary" onclick="closeSettingsModal()">Cancel</button>
        <button class="btn btn-danger" onclick="handleLogout()">Logout</button>
        <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Global animations -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/js/auth-manager.js"></script>
  <script src="/js/global-animations.js"></script>
  <script src="/js/auth-shared.js"></script>
  <script src="/js/nav-shared.js"></script>
  <script>
    // Landing page: Initialize with wave + ongoing
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof initFallingFX === 'function') {
        initFallingFX(); // Full wave + ongoing
    }
  });

  // Liquid Glass Controls
    let isLocked = false;
    
  function toggleControls() {
    const controls = document.querySelector('.glass-controls');
      const button = controls.querySelector('button[onclick="toggleControls()"]');
    
    if (controls.style.display === 'none') {
      controls.style.display = 'block';
        button.textContent = 'Hide';
    } else {
      controls.style.display = 'none';
        button.textContent = 'Show';
      }
    }
    
    function toggleLock() {
      isLocked = !isLocked;
      const lockButton = document.getElementById('lock-values');
      const shadowBlur = document.getElementById('shadow-blur');
      const tintOpacity = document.getElementById('tint-opacity');
      const frostBlur = document.getElementById('frost-blur');
      const distortionStrength = document.getElementById('distortion-strength');
      
      lockButton.textContent = isLocked ? 'üîí Unlock' : 'üîì Lock';
      lockButton.style.background = isLocked ? 'var(--warning)' : 'var(--teal)';
      
      // Disable/enable sliders
      [shadowBlur, tintOpacity, frostBlur, distortionStrength].forEach(slider => {
        slider.disabled = isLocked;
        slider.style.opacity = isLocked ? '0.5' : '1';
      });
    }

  // Initialize liquid glass controls
  document.addEventListener('DOMContentLoaded', function() {
    const root = document.documentElement;
    
    function updateGlassVar(name, value) {
        if (isLocked) return;
      root.style.setProperty(name, value);
    }
    
    function updateSVG() {
        if (isLocked) return;
        
      const distortionStrength = document.getElementById('distortion-strength')?.value || 77;
      const noiseFrequency = document.getElementById('noise-frequency')?.value || 0.008;
      
      const displacementMap = document.querySelector('feDisplacementMap');
      const turbulence = document.querySelector('feTurbulence');
      
      if (displacementMap) displacementMap.setAttribute('scale', distortionStrength);
      if (turbulence) turbulence.setAttribute('baseFrequency', `${noiseFrequency} ${noiseFrequency}`);
    }
    
    // Control mappings
    const controls = {
      'shadow-blur': ['--glass-shadow-blur', v => v + 'px'],
      'tint-opacity': ['--glass-tint-opacity', v => (v / 100)],
      'frost-blur': ['--glass-frost-blur', v => v + 'px'],
      'distortion-strength': ['--glass-distortion-strength', v => v]
    };
    
    // Add event listeners
    Object.keys(controls).forEach(id => {
      const input = document.getElementById(id);
      if (input) {
        input.addEventListener('input', (e) => {
          const [cssVar, formatter] = controls[id];
          updateGlassVar(cssVar, formatter(e.target.value));
          updateSVG();
        });
      }
    });
      
      // Add lock button event listener
      const lockButton = document.getElementById('lock-values');
      if (lockButton) {
        lockButton.addEventListener('click', toggleLock);
      }
    });

    // Auth state management
    let isLoggedIn = false;
    let currentUser = null;

    // Helper to get current user
    function getCurrentUser() {
      return window.authManager?.getUser() || currentUser;
    }

    // Check if user is logged in on page load
    async function checkAuthState() {
      const user = await window.authManager.checkAuth();
      if (user) {
        currentUser = user;
        isLoggedIn = true;
        updateNavbarForLoggedInUser();
      } else {
        currentUser = null;
        isLoggedIn = false;
        updateNavbarForLoggedOutUser();
      }
    }

    // Subscribe to auth state changes (so UI updates on login/logout)
    if (window.authManager) {
      window.authManager.onAuthStateChange((user) => {
        console.log('üîî Auth state changed:', user);
        if (user) {
          currentUser = user;
          isLoggedIn = true;
          updateNavbarForLoggedInUser();
        } else {
          currentUser = null;
          isLoggedIn = false;
          updateNavbarForLoggedOutUser();
        }
      });
    }

    // Update navbar to show user menu instead of login/signup
    function updateNavbarForLoggedInUser() {
      document.getElementById('navbarAuth').style.display = 'none';
      document.getElementById('navbarUser').style.display = 'flex';
      document.getElementById('userName').textContent = currentUser.username || currentUser.name || 'User';
      document.getElementById('userAvatar').textContent = currentUser.avatar || 'üë§';
    }

    // Update navbar to show login/signup buttons
    function updateNavbarForLoggedOutUser() {
      document.getElementById('navbarAuth').style.display = 'flex';
      document.getElementById('navbarUser').style.display = 'none';
    }

    // Modal functions
    function openLoginModal() {
      document.getElementById('loginModal').classList.add('show');
      document.body.style.overflow = 'hidden';
      switchModalTab('login');
    }

    function closeLoginModal() {
      document.getElementById('loginModal').classList.remove('show');
      document.body.style.overflow = '';
      clearFormErrors();
    }

    function switchModalTab(tab) {
      // Remove active class from all tabs and forms
      document.querySelectorAll('.modal-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.modal-form').forEach(f => f.classList.remove('active'));
      
      // Add active class to selected tab and form
      event.target.classList.add('active');
      document.getElementById(tab + 'Form').classList.add('active');
      clearFormErrors();
    }

    function showForgotPassword() {
      document.getElementById('loginModal').style.display = 'none';
      document.getElementById('forgotPasswordModal').style.display = 'flex';
    }

    function closeForgotPassword() {
      document.getElementById('forgotPasswordModal').style.display = 'none';
      document.getElementById('loginModal').style.display = 'flex';
    }

    // Form validation
    function clearFormErrors() {
      document.querySelectorAll('.form-error').forEach(error => {
        error.textContent = '';
      });
    }

    function showError(fieldId, message) {
      const errorElement = document.getElementById(fieldId + 'Error');
      if (errorElement) {
        errorElement.textContent = message;
      }
    }

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function validatePassword(password) {
      return password.length >= 8;
    }

    function updatePasswordStrength(password) {
      const strengthElement = document.getElementById('passwordStrength');
      if (!strengthElement) return;

      strengthElement.className = 'password-strength';
      
      if (password.length < 6) {
        strengthElement.classList.add('weak');
      } else if (password.length < 8) {
        strengthElement.classList.add('fair');
      } else if (password.length < 12) {
        strengthElement.classList.add('good');
      } else {
        strengthElement.classList.add('strong');
      }
    }

    // Password toggle functionality
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const button = input.parentNode.querySelector('.password-toggle');
      
      if (input.type === 'password') {
        input.type = 'text';
        button.textContent = 'üôà';
      } else {
        input.type = 'password';
        button.textContent = 'üëÅÔ∏è';
      }
    }

    // Real Supabase Google OAuth
    async function handleGoogleAuth() {
      try {
        await window.authManager.loginWithGoogle();
        // User will be redirected to Google OAuth
      } catch (error) {
        showNotification('Sign in failed: ' + error.message, 'error');
      }
    }

    // Login with anonymous auth (email/password can be added later)
    async function handleLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showNotification('Please enter both email and password', 'error');
        return;
      }
      
      // Use anonymous auth for now
      const { data, error } = await supabase.auth.signInAnonymously();
      
      if (error) {
        showNotification('Login failed: ' + error.message, 'error');
        return;
      }
      
      const currentUser = {
        id: data.user.id,
        email: email,
        username: email.split('@')[0],
        avatar: 'üë§'
      };
      
      setCurrentUser(currentUser);
      updateNavbarForLoggedInUser();
      closeLoginModal();
      showNotification('Welcome back!', 'success');
    }

    // Signup with anonymous auth (full signup can be added later)
    async function handleSignup() {
      const firstName = document.getElementById('signupFirstName').value;
      const lastName = document.getElementById('signupLastName').value;
      const email = document.getElementById('signupEmail').value;
      const username = document.getElementById('signupUsername').value;
      const password = document.getElementById('signupPassword').value;
      const confirmPassword = document.getElementById('signupConfirmPassword').value;
      const terms = document.getElementById('terms').checked;
      
      if (!firstName || !lastName || !email || !username || !password) {
        showNotification('Please fill in all required fields', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        showNotification('Passwords do not match', 'error');
        return;
      }
      
      if (!terms) {
        showNotification('Please agree to the Terms of Service', 'error');
        return;
      }
      
      // Use anonymous auth for now
      const { data, error } = await supabase.auth.signInAnonymously();
      
      if (error) {
        showNotification('Signup failed: ' + error.message, 'error');
        return;
      }
      
      const currentUser = {
        id: data.user.id,
        name: `${firstName} ${lastName}`,
        username: username,
        email: email,
        avatar: 'üë§'
      };
      
      setCurrentUser(currentUser);
      updateNavbarForLoggedInUser();
      closeLoginModal();
      showNotification(`Welcome to PokerGeek, ${firstName}!`, 'success');
    }

    // Guest Sign In
    async function handleGuestSignIn() {
      try {
        const user = await window.authManager.createGuest();
        
        // Update local state
        currentUser = user;
        isLoggedIn = true;
        
        updateNavbarForLoggedInUser();
        closeLoginModal();
        showNotification(`Playing as ${user.username}`, 'success');
      } catch (error) {
        showNotification('Failed to create guest session', 'error');
      }
    }

    // Toggle User Dropdown
    function toggleUserDropdown() {
      const dropdown = document.getElementById('userDropdown');
      const isVisible = dropdown.style.display !== 'none';
      
      if (isVisible) {
        dropdown.style.display = 'none';
      } else {
        // Update dropdown content with current user data
        const user = getCurrentUser();
        document.getElementById('dropdownAvatar').textContent = user?.avatar || 'üë§';
        document.getElementById('dropdownUsername').textContent = user?.username || 'Username';
        document.getElementById('dropdownEmail').textContent = user?.email || 'user@example.com';
        dropdown.style.display = 'block';
      }
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('userDropdown');
      const profileTile = document.querySelector('.user-profile-tile');
      
      if (dropdown && !dropdown.contains(event.target) && !profileTile?.contains(event.target)) {
        dropdown.style.display = 'none';
      }
    });

    // Logout Function
    async function handleLogout() {
      if (confirm('Are you sure you want to logout?')) {
        // Use AuthManager for unified logout
        await window.authManager.logout();
        
        // Update local state
        currentUser = null;
        isLoggedIn = false;
        
        // Hide dropdown
        const dropdown = document.getElementById('userDropdown');
        if (dropdown) dropdown.style.display = 'none';
        
        showNotification('Logged out successfully', 'success');
      }
    }

    // Profile Settings (placeholder)
    function openProfileSettings() {
      toggleUserDropdown();
      showNotification('Profile settings coming soon!', 'info');
    }

    // Change Username (placeholder)
    function openChangeUsername() {
      toggleUserDropdown();
      const user = getCurrentUser();
      const newUsername = prompt('Enter new username:', user?.username || '');
      
      if (newUsername && newUsername.trim()) {
        if (user) {
          user.username = newUsername.trim();
          setCurrentUser(user);
          document.getElementById('userName').textContent = newUsername.trim();
          showNotification('Username updated successfully!', 'success');
        }
      }
    }

    // Change Password (placeholder)
    function openChangePassword() {
      toggleUserDropdown();
      
      const user = getCurrentUser();
      if (user?.isGuest) {
        showNotification('Guest users cannot change passwords. Sign up for a full account!', 'info');
        return;
      }
      
      showNotification('Change password functionality coming soon!', 'info');
    }

    // Avatar Picker (placeholder)
    function openAvatarPicker() {
      toggleUserDropdown();
      
      const avatars = ['üë§', 'üòé', 'ü§ì', 'üéØ', 'üëë', 'üÉè', 'üé≤', 'üé∞', 'üíé', '‚≠ê', 'üî•', 'üí™', 'üß†', 'üöÄ', 'üëª'];
      const choice = prompt('Choose an avatar:\n' + avatars.map((a, i) => `${i + 1}. ${a}`).join('\n'));
      
      if (choice && !isNaN(choice)) {
        const index = parseInt(choice) - 1;
        if (index >= 0 && index < avatars.length) {
          const user = getCurrentUser();
          if (user) {
            user.avatar = avatars[index];
            setCurrentUser(user);
            document.getElementById('userAvatar').textContent = avatars[index];
            showNotification('Avatar updated!', 'success');
          }
        }
      }
    }

    // Notification system
    function showNotification(message, type = 'info') {
      // Remove existing notifications
      const existing = document.querySelector('.notification');
      if (existing) {
        existing.remove();
      }
      
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.innerHTML = `
        <div class="notification-content">
          <span class="notification-icon">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
          <span class="notification-message">${message}</span>
        </div>
      `;
      
      // Add to page
      document.body.appendChild(notification);
      
      // Show notification
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);
      
      // Auto remove after 3 seconds
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 300);
      }, 3000);
    }

    function handleForgotPassword() {
      const email = document.querySelector('#forgotPasswordModal input[type="email"]').value;
      if (!email) {
        alert('Please enter your email address');
        return;
      }
      
      if (!validateEmail(email)) {
        alert('Please enter a valid email address');
        return;
      }
      
      alert('Password reset email sent to ' + email);
      closeForgotPassword();
    }

    // Settings Modal Functions
    function openSettingsModal() {
      document.getElementById('settingsModal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
      loadUserSettings();
    }

    function closeSettingsModal() {
      document.getElementById('settingsModal').style.display = 'none';
      document.body.style.overflow = '';
    }

    function switchSettingsTab(tab) {
      // Remove active class from all tabs and content
      document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.settings-content').forEach(c => c.classList.remove('active'));
      
      // Add active class to clicked tab and corresponding content
      event.target.classList.add('active');
      document.getElementById(tab + 'Tab').classList.add('active');
    }

    function loadUserSettings() {
      if (!currentUser) return;
      
      // Load profile data
      const nameParts = currentUser.name.split(' ');
      document.getElementById('settingsFirstName').value = nameParts[0] || '';
      document.getElementById('settingsLastName').value = nameParts.slice(1).join(' ') || '';
      document.getElementById('settingsUsername').value = currentUser.username || '';
      document.getElementById('settingsEmail').value = currentUser.email || '';
      document.getElementById('settingsBio').value = currentUser.bio || '';
      document.getElementById('currentAvatar').textContent = currentUser.avatar || 'üë§';
      
      // Load preferences
      document.getElementById('defaultStakes').value = currentUser.defaultStakes || 'micro';
      document.getElementById('gameType').value = currentUser.gameType || 'holdem';
      document.getElementById('autoMuck').checked = currentUser.autoMuck || false;
      document.getElementById('showCards').checked = currentUser.showCards || false;
      
      // Load notification preferences
      document.getElementById('emailNotifications').checked = currentUser.emailNotifications !== false;
      document.getElementById('gameInvites').checked = currentUser.gameInvites !== false;
      document.getElementById('friendRequests').checked = currentUser.friendRequests !== false;
      document.getElementById('tournamentUpdates').checked = currentUser.tournamentUpdates !== false;
    }

    function selectAvatar(avatar) {
      document.getElementById('currentAvatar').textContent = avatar;
      // Add visual feedback
      document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.remove('selected');
      });
      event.target.classList.add('selected');
    }

    function saveSettings() {
      if (!currentUser) return;
      
      // Update profile data
      const firstName = document.getElementById('settingsFirstName').value;
      const lastName = document.getElementById('settingsLastName').value;
      const username = document.getElementById('settingsUsername').value;
      const email = document.getElementById('settingsEmail').value;
      const bio = document.getElementById('settingsBio').value;
      const avatar = document.getElementById('currentAvatar').textContent;
      
      // Basic validation
      if (!firstName || !lastName || !username || !email) {
        showNotification('Please fill in all required fields', 'error');
        return;
      }
      
      // Update user object
      currentUser.name = `${firstName} ${lastName}`;
      currentUser.username = username;
      currentUser.email = email;
      currentUser.bio = bio;
      currentUser.avatar = avatar;
      
      // Update preferences
      currentUser.defaultStakes = document.getElementById('defaultStakes').value;
      currentUser.gameType = document.getElementById('gameType').value;
      currentUser.autoMuck = document.getElementById('autoMuck').checked;
      currentUser.showCards = document.getElementById('showCards').checked;
      
      // Update notification preferences
      currentUser.emailNotifications = document.getElementById('emailNotifications').checked;
      currentUser.gameInvites = document.getElementById('gameInvites').checked;
      currentUser.friendRequests = document.getElementById('friendRequests').checked;
      currentUser.tournamentUpdates = document.getElementById('tournamentUpdates').checked;
      
      // Save to localStorage
      localStorage.setItem('pokerUser', JSON.stringify(currentUser));
      
      // Update navbar
      updateNavbarForLoggedInUser();
      
      // Close modal and show success
      closeSettingsModal();
      showNotification('Settings saved successfully!', 'success');
    }

    // Duplicate handleLogout removed - using unified version above

    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
      const userMenu = document.querySelector('.user-menu');
      const dropdown = document.getElementById('userDropdown');
      
      if (userMenu && !userMenu.contains(event.target)) {
        dropdown.classList.remove('show');
      }
    });

    // Password strength monitoring
    document.addEventListener('DOMContentLoaded', async function() {
      const passwordInput = document.getElementById('signupPassword');
      if (passwordInput) {
        passwordInput.addEventListener('input', function() {
          updatePasswordStrength(this.value);
        });
      }
      
      // Initialize auth system with AuthManager
      await checkAuthState();
    });

    // Close modal when clicking outside
    window.onclick = function(event) {
      const loginModal = document.getElementById('loginModal');
      const forgotModal = document.getElementById('forgotPasswordModal');
      if (event.target === loginModal) {
        closeLoginModal();
      }
      if (event.target === forgotModal) {
        closeForgotPassword();
      }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeLoginModal();
      }
    });

    // Liquid Glass Controls (duplicate removed)

  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const t=document.querySelector(a.getAttribute('href'));
      if(t){ e.preventDefault(); t.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
  });

  const observer=new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        entry.target.style.opacity='1';
        entry.target.style.transform='translateY(0)';
      }
    });
  },{threshold:0.1, rootMargin:'0px 0px -50px 0px'});

  document.querySelectorAll('.feature-card,.stat-item').forEach(el=>{
    el.style.opacity='0'; el.style.transform='translateY(30px)';
    el.style.transition='opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
  });

  </script>

  <!-- Liquid Glass SVG Filter -->
  <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="position:absolute; overflow:hidden">
    <defs>
      <filter id="glass-distortion" x="0%" y="0%" width="100%" height="100%">
        <feTurbulence type="fractalNoise" baseFrequency="0.008 0.008" numOctaves="2" seed="92" result="noise" />
        <feGaussianBlur in="noise" stdDeviation="2" result="blurred" />
        <feDisplacementMap in="SourceGraphic" in2="blurred" scale="77" xChannelSelector="R" yChannelSelector="G" />
      </filter>
    </defs>
  </svg>
</body>
</html>
