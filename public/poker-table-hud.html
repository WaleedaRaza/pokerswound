<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PokerGeek.ai - Table</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/css/poker-table-hud.css">
</head>
<body>
    <!-- Full Screen Game Container -->
    <div class="game-container">
        <!-- Poker Table -->
        <div class="poker-table-wrapper">
            <div class="table-surface">
                <!-- Inner table pattern -->
            </div>
            
            <!-- Seats Container -->
            <div class="seats-container" id="seatsContainer">
                <!-- Seats will be generated by JavaScript -->
            </div>
            
            <!-- Table Center (Cards & Pot) -->
            <div class="table-center">
                <div class="community-cards" id="communityCards">
                    <!-- Community cards will be added here -->
                </div>
                <div class="pot-display">
                    <div class="pot-label">POT</div>
                    <div class="pot-amount" id="potAmount">$0</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Floating HUD -->
    <div class="floating-hud" id="floatingHud">
        <div class="hud-header">
            <div class="hud-brand">PokerGeek<span class="ai">.ai</span></div>
            <button class="hud-toggle" id="hudToggle">‚ñº</button>
        </div>
        <div class="hud-content">
            <div class="hud-info">
                <div class="hud-info-row">
                    <span class="hud-label">Room</span>
                    <span class="hud-value" id="roomCode">DEMO</span>
                </div>
                <div class="hud-info-row">
                    <span class="hud-label">Blinds</span>
                    <span class="hud-value" id="blindsInfo">$25/$50</span>
                </div>
                <div class="hud-info-row">
                    <span class="hud-label">Hand</span>
                    <span class="hud-value" id="handNumber">#42</span>
                </div>
            </div>
            <div class="hud-actions">
                <button class="hud-button primary" id="hostControlsBtn">
                    üéÆ Host Controls
                </button>
                <button class="hud-button" id="settingsBtn">
                    ‚öôÔ∏è Settings
                </button>
                <button class="hud-button" id="leaveTableBtn">
                    üö™ Leave Table
                </button>
            </div>
        </div>
    </div>
    
    <!-- Action Overlay (Only shows when acting) -->
    <div class="action-overlay" id="actionOverlay">
        <div class="action-controls">
            <!-- Quick Bets -->
            <div class="quick-bets">
                <button class="quick-bet" data-amount="0.5">¬Ω POT</button>
                <button class="quick-bet" data-amount="0.75">¬æ POT</button>
                <button class="quick-bet" data-amount="1">POT</button>
                <button class="quick-bet" data-amount="2">2√ó POT</button>
            </div>
            
            <!-- Bet Slider -->
            <div class="bet-slider-container">
                <div class="bet-slider" id="betSlider">
                    <div class="bet-slider-fill" id="betSliderFill"></div>
                    <div class="bet-slider-handle" id="betSliderHandle"></div>
                </div>
                <input type="text" class="bet-amount-input" id="betAmountInput" value="$0">
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn btn-fold" id="foldBtn">
                    FOLD
                    <span class="btn-hotkey">F</span>
                </button>
                <button class="action-btn btn-call" id="callBtn">
                    CALL
                    <span class="btn-amount">$0</span>
                    <span class="btn-hotkey">C</span>
                </button>
                <button class="action-btn btn-raise" id="raiseBtn">
                    RAISE
                    <span class="btn-amount">$0</span>
                    <span class="btn-hotkey">R</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Host Controls Modal (Hidden by default) -->
    <div class="modal-overlay" id="hostControlsModal" style="display: none;">
        <!-- Modal content here -->
    </div>
    
    <script>
        // Initialize the table
        document.addEventListener('DOMContentLoaded', () => {
            const seatsContainer = document.getElementById('seatsContainer');
            
            // Generate 10 seats
            for (let i = 0; i < 10; i++) {
                const seat = document.createElement('div');
                seat.className = 'seat empty';
                seat.setAttribute('data-position', i);
                seat.setAttribute('data-seat-index', i);
                
                seat.innerHTML = `
                    <div class="seat-tile">
                        <div class="player-info">
                            <div class="player-avatar">‚ûï</div>
                            <div class="player-details">
                                <div class="player-name">Empty</div>
                                <div class="player-stack">Seat ${i + 1}</div>
                            </div>
                        </div>
                        <div class="player-cards">
                            <!-- Cards will be added when player sits -->
                        </div>
                    </div>
                    <!-- Dealer/Blind buttons will be added here -->
                `;
                
                seatsContainer.appendChild(seat);
            }
            
            // Demo: Fill some seats
            const demoPlayers = [
                { position: 0, name: 'WALEED', stack: '$5,280', avatar: 'ü¶à', isMe: true, cards: ['hearts_A', 'hearts_K'] },
                { position: 2, name: 'ProPlayer', stack: '$3,750', avatar: 'üéØ', cards: ['back', 'back'] },
                { position: 4, name: 'Rocket', stack: '$8,875', avatar: 'üöÄ', cards: ['back', 'back'], isDealer: true },
                { position: 6, name: 'Diamond', stack: '$11,200', avatar: 'üíé', cards: ['back', 'back'] },
                { position: 8, name: 'Lucky', stack: '$2,100', avatar: 'üé≤', cards: ['back', 'back'] }
            ];
            
            demoPlayers.forEach(player => {
                const seat = seatsContainer.querySelector(`[data-position="${player.position}"]`);
                if (seat) {
                    seat.classList.remove('empty');
                    if (player.isMe) seat.classList.add('my-seat');
                    
                    const tile = seat.querySelector('.seat-tile');
                    tile.querySelector('.player-avatar').textContent = player.avatar;
                    tile.querySelector('.player-name').textContent = player.name;
                    tile.querySelector('.player-stack').textContent = player.stack;
                    
                    // Add cards
                    const cardsDiv = tile.querySelector('.player-cards');
                    cardsDiv.innerHTML = player.cards.map(card => 
                        `<div class="player-card" style="background-image: url('/cards/${card}.png');"></div>`
                    ).join('');
                    
                    // Add dealer button
                    if (player.isDealer) {
                        const dealerBtn = document.createElement('div');
                        dealerBtn.className = 'dealer-button';
                        dealerBtn.textContent = 'D';
                        seat.appendChild(dealerBtn);
                    }
                }
            });
            
            // Add blinds
            const seat0 = seatsContainer.querySelector('[data-position="0"]');
            const sbBtn = document.createElement('div');
            sbBtn.className = 'blind-button sb';
            sbBtn.textContent = 'S';
            seat0.appendChild(sbBtn);
            
            const seat2 = seatsContainer.querySelector('[data-position="2"]');
            const bbBtn = document.createElement('div');
            bbBtn.className = 'blind-button bb';
            bbBtn.textContent = 'B';
            seat2.appendChild(bbBtn);
            
            // Add community cards
            const communityCards = document.getElementById('communityCards');
            const cards = ['hearts_A', 'spades_K', 'hearts_Q', 'clubs_J', 'diamonds_10'];
            communityCards.innerHTML = cards.map(card => 
                `<div class="community-card" style="background-image: url('/cards/${card}.png');"></div>`
            ).join('');
            
            // Set pot
            document.getElementById('potAmount').textContent = '$3,450';
            
            // Show action overlay for demo
            setTimeout(() => {
                document.getElementById('actionOverlay').classList.add('show');
                document.getElementById('callBtn').querySelector('.btn-amount').textContent = '$50';
                document.getElementById('raiseBtn').querySelector('.btn-amount').textContent = '$150';
            }, 1000);
            
            // HUD toggle
            document.getElementById('hudToggle').addEventListener('click', () => {
                const hud = document.getElementById('floatingHud');
                hud.classList.toggle('collapsed');
                document.getElementById('hudToggle').textContent = hud.classList.contains('collapsed') ? '‚ñ∂' : '‚ñº';
            });
            
            // Bet slider functionality
            const slider = document.getElementById('betSlider');
            const sliderFill = document.getElementById('betSliderFill');
            const sliderHandle = document.getElementById('betSliderHandle');
            const amountInput = document.getElementById('betAmountInput');
            
            let isDragging = false;
            
            const updateSlider = (percentage) => {
                percentage = Math.max(0, Math.min(100, percentage));
                sliderFill.style.width = percentage + '%';
                sliderHandle.style.left = percentage + '%';
                
                // Calculate amount (demo: $50 min, $5000 max)
                const minBet = 50;
                const maxBet = 5000;
                const amount = Math.round(minBet + (maxBet - minBet) * (percentage / 100));
                amountInput.value = '$' + amount;
                document.getElementById('raiseBtn').querySelector('.btn-amount').textContent = '$' + amount;
            };
            
            slider.addEventListener('mousedown', (e) => {
                isDragging = true;
                const rect = slider.getBoundingClientRect();
                const percentage = ((e.clientX - rect.left) / rect.width) * 100;
                updateSlider(percentage);
            });
            
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const rect = slider.getBoundingClientRect();
                    const percentage = ((e.clientX - rect.left) / rect.width) * 100;
                    updateSlider(percentage);
                }
            });
            
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
            
            // Quick bet buttons
            document.querySelectorAll('.quick-bet').forEach(btn => {
                btn.addEventListener('click', () => {
                    const multiplier = parseFloat(btn.getAttribute('data-amount'));
                    const pot = 3450; // Demo pot
                    const amount = Math.round(pot * multiplier);
                    const percentage = ((amount - 50) / (5000 - 50)) * 100;
                    updateSlider(percentage);
                });
            });
            
            // Initial slider position
            updateSlider(30);
        });
    </script>
</body>
</html>
